import{J as a,a as e,n as s,z as t,A as o,B as l,K as c,g as i,d as n,w as r,i as d,o as u,e as f,f as m,E as p,F as g,G as _,H as h,h as y,k as b,I as P,j as w}from"./index-BxQnvICo.js";import{a as x,b as k,s as v}from"./api.CcqH0Zgx.js";import{_ as F,a as I,b as D,c as E}from"./icon14.BrQA54VK.js";import{_ as T}from"./btc.JZb5stum.js";import{_ as A}from"./eth.BkoDDH_E.js";import{_ as C,a as $}from"./usdc.C8qnB_UY.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=S({data:()=>({balance:"0.00",expectedEarnings:"0.00",cumulativeIncome:"0.00",orderVolume:"0",pledgeProducts:[],loading:!0}),onLoad(){this.loadPageData()},onPullDownRefresh(){this.loadPageData()},methods:{async loadPageData(){try{this.loading=!0,await Promise.all([this.fetchUserInfo(),this.loadPledgeProducts()])}catch(e){console.error("Loading page data failed:",e)}finally{this.loading=!1,a()}},async fetchUserInfo(){try{const a=await x.user.getInfo();a&&(this.balance=this.formatBalance(a.money),this.expectedEarnings=k.formatAmount(a.dayfor_earning),this.cumulativeIncome=k.formatAmount(a.all_earning),this.orderVolume=a.order_num||"0",console.log("用户信息更新成功:",{balance:this.balance,expectedEarnings:this.expectedEarnings,cumulativeIncome:this.cumulativeIncome,orderVolume:this.orderVolume}))}catch(a){console.error("Failed to get user info:",a),k.showError("加载用户数据失败")}},async loadPledgeProducts(){try{const a=await x.pledge.getProducts();if(console.log("API response:",a),!a||!a.zhiya)throw new Error("Failed to get data");this.pledgeProducts=a.zhiya.filter((a=>"1"===a.status)),console.log("Pledge product list:",this.pledgeProducts)}catch(a){console.error("Loading pledge products failed:",a),k.showError("Loading pledge products failed:"),this.pledgeProducts=[]}},formatBalance(a){if(null==a||""===a)return"0.00";const e=parseFloat(a);return isNaN(e)?"0.00":e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},formatAmount(a){if(null==a||""===a)return"0.00";const e=parseFloat(a);return isNaN(e)?"0.00":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},buyProduct(a){console.log("Purchase product:",a),"1"===a.status?s({url:`/pages/buy/index?productData=${encodeURIComponent(JSON.stringify(a))}`}):e({title:"This product is not available for purchase",icon:"none"})},showBuyDialog(a){const e=`Product name: ${a.title}\nInvestment cycle: ${a.days} days\nExpected earnings: ${a.lixi_fanwei}\nInvestment range: ${this.formatAmount(a.amount)}-${this.formatAmount(a.limit_amount)} USDT\nPurchase limit: ${a.limit_purchase} times`;t({title:"Product details",content:e,confirmText:"Buy now",cancelText:"Cancel",success:e=>{e.confirm&&this.processPurchase(a)}})},processPurchase(a){o({title:"Processing..."}),setTimeout((()=>{l(),e({title:"Purchase successful",icon:"success"})}),1500)},async callPurchaseAPI(a,s){try{const t=v.getToken();if(!t)throw new Error("未找到token，请先连接钱包");const o=await c({url:"https://u.souhlawfirm.com/api/zhiya_order",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:t},data:{id:a.id,amount:s,token:t}});if(console.log("Purchase interface response:",o),200===o.statusCode){if(0===o.data.code)return e({title:"Purchase successful",icon:"success"}),o.data;throw new Error(o.data.info||"Purchase failed")}throw new Error(`Request failed, status code: ${o.statusCode}`)}catch(t){throw console.error("Failed to call purchase interface:",t),e({title:t.message||"Purchase failed",icon:"none"}),t}},getUserId:()=>i("userId")||"",refreshData(){this.loadPledgeProducts()},goToIntroduce(){s({url:"/pages/ai-trading/index"})},goToOrderList(){s({url:"/pages/record/index"})}}},[["render",function(a,e,s,t,o,l){const c=d,i=b,x=P,k=w;return u(),n(c,{class:"pledge-container"},{default:r((()=>[f(c,{class:"header"}),f(c,{class:"balance-section"},{default:r((()=>[f(c,{class:"balance-display"},{default:r((()=>[f(i,{class:"currency-symbol"},{default:r((()=>[m("$")])),_:1}),f(i,{class:"balance-amount"},{default:r((()=>[m(p(o.balance),1)])),_:1})])),_:1}),f(i,{class:"balance-label"},{default:r((()=>[m("Funds in Escrow (USDT)")])),_:1})])),_:1}),f(c,{class:"navigation-buttons"},{default:r((()=>[f(x,{class:"nav-button introduce",onClick:l.goToIntroduce},{default:r((()=>[m("Introduce")])),_:1},8,["onClick"]),f(x,{class:"nav-button order",onClick:l.goToOrderList},{default:r((()=>[m("Order")])),_:1},8,["onClick"])])),_:1}),f(c,{class:"stats-card"},{default:r((()=>[f(c,{class:"stat-item"},{default:r((()=>[f(i,{class:"stat-label"},{default:r((()=>[m("Expected earnings for today")])),_:1}),f(i,{class:"stat-value"},{default:r((()=>[m("$ "+p(o.expectedEarnings),1)])),_:1})])),_:1}),f(c,{class:"stat-item"},{default:r((()=>[f(i,{class:"stat-label"},{default:r((()=>[m("Cumulative income")])),_:1}),f(i,{class:"stat-value"},{default:r((()=>[m("$ "+p(o.cumulativeIncome),1)])),_:1})])),_:1}),f(c,{class:"stat-item"},{default:r((()=>[f(i,{class:"stat-label"},{default:r((()=>[m("Order volume")])),_:1}),f(i,{class:"stat-value"},{default:r((()=>[m(p(o.orderVolume),1)])),_:1})])),_:1})])),_:1}),f(c,{class:"auto-staking-section"},{default:r((()=>[f(i,{class:"auto-staking-text"},{default:r((()=>[m("Auto Staking")])),_:1}),f(c,{class:"help-icon"},{default:r((()=>[f(i,{class:"help-icon-text"},{default:r((()=>[m("?")])),_:1})])),_:1})])),_:1}),(u(!0),g(h,null,_(o.pledgeProducts,((a,e)=>(u(),n(c,{class:"pledge-form",key:a.id},{default:r((()=>[f(c,{class:"product-info"},{default:r((()=>[f(c,{class:"product-header"},{default:r((()=>[f(c,{class:"avatar"},{default:r((()=>[f(i,{class:"avatar-text"},{default:r((()=>[m(p(a.title.charAt(0)),1)])),_:2},1024)])),_:2},1024),f(c,{class:"product-details"},{default:r((()=>[f(i,{class:"product-name"},{default:r((()=>[m(p(a.title),1)])),_:2},1024),f(i,{class:"purchase-limit"},{default:r((()=>[m(p(a.limit_purchase)+" purchase limit",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(c,{class:"product-specs"},{default:r((()=>[f(c,{class:"spec-item"},{default:r((()=>[f(i,{class:"spec-label"},{default:r((()=>[m("limit(USDT)")])),_:1}),f(i,{class:"spec-value"},{default:r((()=>[m(p(l.formatAmount(a.amount))+"-"+p(l.formatAmount(a.limit_amount)),1)])),_:2},1024)])),_:2},1024),f(c,{class:"spec-item"},{default:r((()=>[f(i,{class:"spec-label"},{default:r((()=>[m("Rate of return")])),_:1}),f(i,{class:"spec-value"},{default:r((()=>[m(p(a.lixi_fanwei),1)])),_:2},1024)])),_:2},1024),f(c,{class:"spec-item"},{default:r((()=>[f(i,{class:"spec-label"},{default:r((()=>[m("Cycle")])),_:1}),f(i,{class:"spec-value"},{default:r((()=>[m(p(a.days)+"Day",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(c,{class:"social-icons"},{default:r((()=>[f(c,{class:"social-icon facebook"},{default:r((()=>[f(k,{class:"icon-image",src:F,mode:"aspectFit"})])),_:1}),f(c,{class:"social-icon facebook"},{default:r((()=>[f(k,{class:"icon-image",src:I,mode:"aspectFit"})])),_:1}),f(c,{class:"social-icon facebook"},{default:r((()=>[f(k,{class:"icon-image",src:D,mode:"aspectFit"})])),_:1}),f(c,{class:"social-icon facebook"},{default:r((()=>[f(k,{class:"icon-image",src:E,mode:"aspectFit"})])),_:1}),f(c,{class:"social-icon facebook"},{default:r((()=>[f(k,{class:"icon-image",src:T,mode:"aspectFit"})])),_:1}),f(c,{class:"social-icon twitter"},{default:r((()=>[f(k,{class:"icon-image",src:A,mode:"aspectFit"})])),_:1}),f(c,{class:"social-icon instagram"},{default:r((()=>[f(k,{class:"icon-image",src:C,mode:"aspectFit"})])),_:1}),f(c,{class:"social-icon telegram"},{default:r((()=>[f(k,{class:"icon-image",src:$,mode:"aspectFit"})])),_:1})])),_:1}),f(c,{class:"buy-button-container"},{default:r((()=>[f(x,{class:"buy-button",onClick:e=>l.buyProduct(a)},{default:r((()=>[m("To Buy")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),o.loading?(u(),n(c,{key:0,class:"loading-container"},{default:r((()=>[f(i,{class:"loading-text"},{default:r((()=>[m("Loading...")])),_:1})])),_:1})):y("",!0),o.loading||0!==o.pledgeProducts.length?y("",!0):(u(),n(c,{key:1,class:"empty-container"},{default:r((()=>[f(i,{class:"empty-text"},{default:r((()=>[m("No pledge products")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-a658ecb7"]]);export{j as default};
