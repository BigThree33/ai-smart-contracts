import{L as e,O as a,M as s,y as t,u as l,d as c,w as o,i as r,o as n,e as u,f as d,E as i,q as f,h as p,P as v,a as m,A as h,B as g,n as y,N as _,k as b,j as w,Q as k}from"./index-BPWpFivt.js";import{_ as C}from"./uni-icons.BYj_8GlW.js";import{r as x}from"./uni-app.es.eWm_5BGm.js";import{_ as A,a as E}from"./eth.LDHlmsnm.js";import{_ as F,a as R}from"./usdc.C8qnB_UY.js";import{b as T,a as j,s as I}from"./api.z3z0JoG3.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";const V=U({__name:"index",setup(U){let V=0;const L=e("receive"),D=e("0.00"),S=e("0.00"),P=e("0.00"),B=e("usdt"),q=e(""),M=e(""),H=e({}),W=e("usdt"),z=e(""),N=e("");e("usdt");const Q=e(""),G=async()=>{try{T.showLoading("Loading account info...");const e=await j.user.getInfo();e&&(D.value=T.formatAmount(e.money),S.value=T.formatAmount(e.total_revenue),P.value=T.formatAmount(e.earnings_24h),console.log("Account information updated successfully:",{availableBalance:D.value,totalRevenue:S.value,earnings24h:P.value}))}catch(e){console.error("Failed to get user info:",e),T.showError("Failed to load account data")}finally{T.hideLoading()}};a((()=>!Q.value||parseFloat(Q.value)<=0?"0.00":Q.value));const O=e=>{L.value=e,console.log("change tab:",e)},X=e=>{B.value=e,console.log("select currency:",e)},$=()=>{v({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{const a=e.tempFiles[0],s=new FileReader;s.onload=e=>{M.value=e.target.result,console.log("image converted to base64 successfully")},s.onerror=e=>{console.error("image conversion to base64 failed:",e),m({title:"image processing failed",icon:"none"})},s.readAsDataURL(a)},fail:e=>{console.error("image selection failed:",e),m({title:"image selection failed",icon:"none"})}})},J=async()=>{if(M.value)if(!q.value||parseFloat(q.value)<=0)T.showError("please enter a valid recharge amount");else try{T.showLoading("submitting...");if(!(I.getToken()||(m({title:"please connect wallet first",icon:"none"}),setTimeout((()=>{y({url:"/pages/wallet/connect"})}),1500),"")))return;console.log("=== image information debugging ==="),console.log("uploadedImage.value length:",M.value.length);const e=await j.transaction.recharge(B.value,q.value,"ERC20",M.value);console.log("recharge response:",e),0===e.code||!0===e.success?(T.showSuccess("recharge application submitted successfully"),q.value="",M.value="",await G()):T.showError(e.info||e.message||"recharge failed")}catch(e){console.error("=== recharge failed ==="),console.error("error information:",e),T.showError("network error, please try again later")}finally{T.hideLoading()}else T.showError("please upload transaction screenshot first")},K=e=>{W.value=e,console.log("select send currency:",e)},Y=()=>{N.value=D.value.replace(/,/g,""),console.log("set max amount")},Z=async()=>{if(z.value.trim())if(!N.value||parseFloat(N.value)<=0)m({title:"please enter a valid withdrawal amount",icon:"none",duration:2e3});else try{h({title:"submitting..."}),console.log("withdrawal information:",{currency:W.value,address:z.value,amount:N.value,network:"ERC20"}),await new Promise((e=>setTimeout(e,1e3))),g(),m({title:"withdrawal application submitted successfully",icon:"success",duration:2e3}),z.value="",N.value=""}catch(e){g(),console.error("withdrawal failed:",e),m({title:"withdrawal failed, please try again later",icon:"none",duration:2e3})}else m({title:"please enter withdrawal address",icon:"none",duration:2e3})},ee=()=>{console.log("go to transaction record page"),y({url:"/pages/record/index?source=account&type=transaction"})},ae=()=>{console.log("go to revenue record page"),y({url:"/pages/record/index?source=account&type=revenue"})},se=async()=>{try{const e=await j.transaction.getRechargeAddress();e&&(H.value=e,console.log("Recharge addresses loaded:",e))}catch(e){console.error("Failed to get recharge addresses:",e),T.showError("Failed to load recharge addresses")}},te=()=>{if(!H.value)return"Loading...";switch(B.value){case"btc":return H.value.btc||"Address not available";case"eth":return H.value.erc||"Address not available";case"usdt":return H.value.usdt||"Address not available";case"usdc":return H.value.usdc||"Address not available";default:return"Address not available"}},le=()=>{const e=te();"Loading..."!==e&&"Address not available"!==e?_({data:e,success:()=>{T.showSuccess("Address copied to clipboard")},fail:()=>{T.showError("Failed to copy address")}}):T.showError("Address not available")},ce=e=>({btc:"/static/btc.jpg",eth:"/static/eth.jpg",usdt:"/static/usdt.jpg",usdc:"/static/usdc.jpg"}[e]||"/static/usdt.jpg");return s((async()=>{try{const e=t();V=e.statusBarHeight||0}catch(e){console.error("get status bar height failed:",e)}await Promise.all([G(),se()])})),(e,a)=>{const s=r,t=b,v=w,m=x(l("uni-icons"),C),h=k;return n(),c(s,{class:"account-container"},{default:o((()=>[u(s,{class:"gradient-bg"}),u(s,{class:"content-area"},{default:o((()=>[u(s,{class:"upper-box"},{default:o((()=>[u(s,{class:"top-nav"},{default:o((()=>[u(s,{class:"nav-item",onClick:ee},{default:o((()=>[u(t,{class:"nav-text"},{default:o((()=>[d("Transaction Record")])),_:1}),u(t,{class:"nav-arrow"},{default:o((()=>[d(">")])),_:1})])),_:1}),u(s,{class:"nav-divider"},{default:o((()=>[d("|")])),_:1}),u(s,{class:"nav-item",onClick:ae},{default:o((()=>[u(t,{class:"nav-text"},{default:o((()=>[d("Revenue Record")])),_:1}),u(t,{class:"nav-arrow"},{default:o((()=>[d(">")])),_:1})])),_:1})])),_:1}),u(s,{class:"balance-area"},{default:o((()=>[u(s,{class:"balance-info"},{default:o((()=>[u(t,{class:"balance-label"},{default:o((()=>[d("Available Balance(USDT)")])),_:1}),u(t,{class:"balance-amount"},{default:o((()=>[d("$"+i(D.value),1)])),_:1})])),_:1}),u(s,{class:"revenue-stats"},{default:o((()=>[u(s,{class:"stat-item"},{default:o((()=>[u(t,{class:"stat-label"},{default:o((()=>[d("Total revenue(USDT)")])),_:1}),u(t,{class:"stat-value"},{default:o((()=>[d(i(S.value),1)])),_:1})])),_:1}),u(s,{class:"stat-divider"},{default:o((()=>[d("|")])),_:1}),u(s,{class:"stat-item"},{default:o((()=>[u(t,{class:"stat-label"},{default:o((()=>[d("Earnings 24h(USDT)")])),_:1}),u(t,{class:"stat-value"},{default:o((()=>[d(i(P.value),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(s,{class:"operation-box"},{default:o((()=>[u(s,{class:"operation-tabs"},{default:o((()=>[u(s,{class:f(["tab-item",{active:"receive"===L.value}]),onClick:a[0]||(a[0]=e=>O("receive"))},{default:o((()=>[u(t,{class:"tab-text"},{default:o((()=>[d("RECEIVE")])),_:1})])),_:1},8,["class"]),u(s,{class:f(["tab-item",{active:"send"===L.value}]),onClick:a[1]||(a[1]=e=>O("send"))},{default:o((()=>[u(t,{class:"tab-text"},{default:o((()=>[d("SEND")])),_:1})])),_:1},8,["class"])])),_:1}),"receive"===L.value?(n(),c(s,{key:0,class:"tab-content"},{default:o((()=>[u(t,{class:"section-title"},{default:o((()=>[d("Currency Type")])),_:1}),u(s,{class:"currency-buttons"},{default:o((()=>[u(s,{class:f(["currency-item",{selected:"btc"===B.value}]),onClick:a[2]||(a[2]=e=>X("btc"))},{default:o((()=>[u(v,{class:"crypto-icon",src:A,mode:"aspectFit"})])),_:1},8,["class"]),u(s,{class:f(["currency-item",{selected:"eth"===B.value}]),onClick:a[3]||(a[3]=e=>X("eth"))},{default:o((()=>[u(v,{class:"crypto-icon",src:E,mode:"aspectFit"})])),_:1},8,["class"]),u(s,{class:f(["currency-item",{selected:"usdt"===B.value}]),onClick:a[4]||(a[4]=e=>X("usdt"))},{default:o((()=>[u(v,{class:"crypto-icon",src:F,mode:"aspectFit"})])),_:1},8,["class"]),u(s,{class:f(["currency-item",{selected:"usdc"===B.value}]),onClick:a[5]||(a[5]=e=>X("usdc"))},{default:o((()=>[u(v,{class:"crypto-icon",src:R,mode:"aspectFit"})])),_:1},8,["class"])])),_:1}),u(s,{class:"divider-line"}),u(s,{class:"recharge-section"},{default:o((()=>[u(s,{class:"recharge-header"},{default:o((()=>[u(v,{class:"crypto-icon-small",src:ce(B.value),mode:"aspectFit"},null,8,["src"]),u(t,{class:"recharge-title"},{default:o((()=>[d(i(B.value.toUpperCase())+" recharge",1)])),_:1})])),_:1}),u(s,{class:"network-button"},{default:o((()=>[u(t,{class:"network-text"},{default:o((()=>[d("ERC20")])),_:1})])),_:1}),u(s,{class:"address-section"},{default:o((()=>[u(t,{class:"address-label"},{default:o((()=>[d("Recharge Address")])),_:1}),u(s,{class:"address-display"},{default:o((()=>[u(t,{class:"address-text"},{default:o((()=>[d(i(te()),1)])),_:1}),u(s,{class:"copy-button",onClick:le},{default:o((()=>[u(t,{class:"copy-text"},{default:o((()=>[d("Copy")])),_:1})])),_:1})])),_:1})])),_:1}),u(s,{class:"upload-area",onClick:$},{default:o((()=>[u(m,{type:"camera",size:"40",color:"#999999"}),u(t,{class:"upload-text"},{default:o((()=>[d("Click to upload transfer screenshot")])),_:1}),M.value?(n(),c(v,{key:0,src:M.value,class:"uploaded-image"},null,8,["src"])):p("",!0)])),_:1}),u(t,{class:"amount-label"},{default:o((()=>[d("Recharge amount")])),_:1}),u(h,{class:"amount-input",modelValue:q.value,"onUpdate:modelValue":a[6]||(a[6]=e=>q.value=e),placeholder:"Please input amount",type:"number"},null,8,["modelValue"]),u(t,{class:"notice-text"},{default:o((()=>[d(" Please do not send other types of assets to the above address. Doing so may result in the loss of your assets. After successful sending, the network node needs to confirm the receipt of the respective asset. Therefore, once you have completed the transfer, submit a screenshot of the successful transfer through the platform and wait for the system to review and confirm. After the system audit, the funds will be automatically added to your AI account for you. If you have any questions, please contact online customer service for verification. ")])),_:1}),u(s,{class:"withdraw-button",onClick:J},{default:o((()=>[u(t,{class:"withdraw-button-text"},{default:o((()=>[d("SUBMIT RECHARGE")])),_:1})])),_:1})])),_:1})])),_:1})):p("",!0),"send"===L.value?(n(),c(s,{key:1,class:"tab-content"},{default:o((()=>[u(t,{class:"section-title"},{default:o((()=>[d("Currency Type")])),_:1}),u(s,{class:"currency-buttons"},{default:o((()=>[u(s,{class:f(["currency-item",{selected:"btc"===W.value}]),onClick:a[7]||(a[7]=e=>K("btc"))},{default:o((()=>[u(v,{class:"crypto-icon",src:A,mode:"aspectFit"})])),_:1},8,["class"]),u(s,{class:f(["currency-item",{selected:"eth"===W.value}]),onClick:a[8]||(a[8]=e=>K("eth"))},{default:o((()=>[u(v,{class:"crypto-icon",src:E,mode:"aspectFit"})])),_:1},8,["class"]),u(s,{class:f(["currency-item",{selected:"usdt"===W.value}]),onClick:a[9]||(a[9]=e=>K("usdt"))},{default:o((()=>[u(v,{class:"crypto-icon",src:F,mode:"aspectFit"})])),_:1},8,["class"]),u(s,{class:f(["currency-item",{selected:"usdc"===W.value}]),onClick:a[10]||(a[10]=e=>K("usdc"))},{default:o((()=>[u(v,{class:"crypto-icon",src:R,mode:"aspectFit"})])),_:1},8,["class"])])),_:1}),u(s,{class:"divider-line"}),u(s,{class:"send-section"},{default:o((()=>[u(s,{class:"send-header"},{default:o((()=>[u(v,{class:"crypto-icon-small",src:ce(W.value),mode:"aspectFit"},null,8,["src"]),u(t,{class:"send-title"},{default:o((()=>[d(i(W.value.toUpperCase())+" withdrawal",1)])),_:1})])),_:1}),u(s,{class:"network-button"},{default:o((()=>[u(t,{class:"network-text"},{default:o((()=>[d("ERC20")])),_:1})])),_:1}),u(t,{class:"input-label"},{default:o((()=>[d("Withdrawal address")])),_:1}),u(h,{class:"address-input",modelValue:z.value,"onUpdate:modelValue":a[11]||(a[11]=e=>z.value=e),placeholder:"Please input address",type:"text"},null,8,["modelValue"]),u(t,{class:"input-label"},{default:o((()=>[d("Quantity")])),_:1}),u(s,{class:"quantity-input-container"},{default:o((()=>[u(h,{class:"quantity-input",modelValue:N.value,"onUpdate:modelValue":a[12]||(a[12]=e=>N.value=e),placeholder:"0.00",type:"number"},null,8,["modelValue"]),u(s,{class:"max-button",onClick:Y},{default:o((()=>[u(t,{class:"max-text"},{default:o((()=>[d("MAX")])),_:1})])),_:1})])),_:1}),u(t,{class:"notice-text"},{default:o((()=>[d(" Please do not send other types of assets to the above address. Doing so may result in the loss of your assets. After successful sending, the network node needs to confirm the receipt of the respective asset. Therefore, once you have completed the transfer, submit a screenshot of the successful transfer through the platform and wait for the system to review and confirm. After the system audit, the funds will be automatically added to your AI account for you. If you have any questions, please contact online customer service for verification. ")])),_:1}),u(s,{class:"withdraw-button",onClick:Z},{default:o((()=>[u(t,{class:"withdraw-button-text"},{default:o((()=>[d("SUBMIT WITHDRAW")])),_:1})])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-b8392b2f"]]);export{V as default};
