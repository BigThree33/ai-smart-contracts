import{L as e,M as a,g as s,u as t,d as l,w as r,i as n,o as i,e as o,f as c,E as u,N as d,a as f,j as _,k as p}from"./index-BPWpFivt.js";import{_ as g}from"./uni-icons.BYj_8GlW.js";import{r as m}from"./uni-app.es.eWm_5BGm.js";import{b as w,s as v,a as h}from"./api.z3z0JoG3.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=y({__name:"index",setup(y){const k=e("/static/sahrebg.png"),b=e(""),j=e({directCount:"0",rewardAmount:"0"});a((()=>{x(),(async()=>{try{w.showLoading("getting...");const e=s("walletAddress")||"",a=s("userTid")||"177",t=v.getToken()||"",l=await h.share.getReferralInfo(e,a,"13",t);l&&(j.value={directCount:l.tj_num||"0",rewardAmount:l.tj_reward||"0"})}catch(e){console.error("get referral info failed:",e),w.showError("get data failed")}finally{w.hideLoading()}})()}));const S=()=>`${window.location.protocol}//${window.location.host}`,x=()=>{try{const e=S(),a=s("userTid");a?(b.value=`${e}?tid=${a}`,console.log("Generated share link:",b.value)):(console.warn("User tid not found, using default value"),b.value=`${e}?tid=177`)}catch(e){console.error("Failed to generate share link:",e);const a=S();b.value=`${a}?tid=177`}},A=()=>{d({data:b.value,success:function(){f({title:"Link copied",icon:"success"})}})},I=()=>{uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:b.value,title:"AI Smart Contracts Trading Platform",summary:"Invite friends to use AI quantitative trading, get 20USDT reward",imageUrl:"/static/logo.png",success:function(e){f({title:"Share successfully",icon:"success"})},fail:function(e){d({data:b.value,success:function(){f({title:"Link copied to clipboard",icon:"success"})}})}})};return(e,a)=>{const s=_,d=n,f=p,w=m(t("uni-icons"),g);return i(),l(d,{class:"share-container"},{default:r((()=>[o(d,{class:"overlay-image-container"},{default:r((()=>[o(s,{class:"overlay-image",src:k.value,mode:"aspectFit"},null,8,["src"])])),_:1}),o(d,{class:"share-content"},{default:r((()=>[o(d,{class:"section referral-section"},{default:r((()=>[o(d,{class:"reward-info-container"},{default:r((()=>[o(f,{class:"reward-title"},{default:r((()=>[c("Referral reward (USDT)")])),_:1}),o(f,{class:"reward-amount"},{default:r((()=>[c(u(j.value.rewardAmount),1)])),_:1}),o(d,{class:"stats-row"},{default:r((()=>[o(d,{class:"stat-item"},{default:r((()=>[o(w,{type:"person",size:"24",color:"#3c8dbc"}),o(f,{class:"stat-label"},{default:r((()=>[c("Direct")])),_:1}),o(f,{class:"stat-value"},{default:r((()=>[c(u(j.value.directCount),1)])),_:1})])),_:1}),o(d,{class:"stat-item"},{default:r((()=>[o(w,{type:"person",size:"24",color:"#ff8c00"}),o(f,{class:"stat-label"},{default:r((()=>[c("Indirect")])),_:1}),o(f,{class:"stat-value"},{default:r((()=>[c("0")])),_:1})])),_:1})])),_:1})])),_:1}),o(d,{class:"divider"}),o(d,{class:"reward-info"},{default:r((()=>[o(f,{class:"reward-main-text"},{default:r((()=>[c("Get referral "),o(f,{class:"highlight"},{default:r((()=>[c("20")])),_:1}),c(" USDT rewards")])),_:1}),o(f,{class:"reward-desc"},{default:r((()=>[c("Invite friends to use Ai quantitative trading, you can get 20USDT reward")])),_:1})])),_:1}),o(d,{class:"share-link-section"},{default:r((()=>[o(d,{class:"link-input"},{default:r((()=>[o(f,{class:"link-text"},{default:r((()=>[c(u(b.value),1)])),_:1})])),_:1}),o(d,{class:"copy-btn",onClick:A},{default:r((()=>[o(f,null,{default:r((()=>[c("Copy")])),_:1})])),_:1})])),_:1}),o(d,{class:"share-button",onClick:I},{default:r((()=>[o(f,{class:"share-button-text"},{default:r((()=>[c("SHARE LINK")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-c3cfdf09"]]);export{k as default};
